---
title: HTTP报文的起始行详解
date: 2017-01-15 22:06:55
tags:
categories: "Web学习笔记"
---

所有的HTTP报文都以一个起始行作为开始。请求报文的起始行说明**要做些什么**，响应报文的起始行说明**发生了什么**。

#### 请求行

请求报文请求服务器对资源进行一些操作。请求报文的起始行，或成为请求行，包含了一个方法和一个请求URL，这个方法描述了服务器应该执行的操作，请求URL描述了要对哪个资源执行这个方法。请求行中还包含HTTP的版本，用来告知服务器，客户端使用的是哪种HTTP。所有这些字段都由空格符分隔。

#### 响应行

响应报文承载了状态信息和操作产生的所有结果数据，将其返回给客户端。响应报文的起始行，或称为响应行，包含了响应报文使用的HTTP版本，数字状态码和描述操作状态的文本形式的原因短语。所有这些字段都是由空格进行分隔。

#### 方法

请求的起始行以方法作为开始，方法用来告知服务器要做些什么。

HTTP规范中定义了一组常用的请求方法。比如，GET方法负责从服务器获取一个文档，POST方法会向服务器发送需要处理的数据，OPTIONS方法用于确定Web服务器的一般功能，或者Web服务器处理特定资源的能力。

<!--more-->

下图描述了七种这样的方法，注意，有些方法的请求报文中有主体，有些则是无主体的请求。

![](/images/categories/web/http_message_methods.png)

注意，并不是所有的服务器都实现了上图列出的所有七种方法。而且，由于HTTP设计得易于扩展，所以除了这些方法之外，其他服务器可能还实现了一些自己的请求方法，这些附加的方法是对HTTP规范的扩展，因此被称为扩展方法。

#### 状态码

方法是用来告诉服务器做什么事情的，状态码则用来告诉客户端，发生了什么事情。

状态码位于响应的起始行中。客户端向一个HTTP服务器发送请求报文时，会发生很多事情。幸运的话，请求会成功完成。但你不会总是那么幸运的。服务器可能会告诉无法找所请求的资源，你没有访问资源的权限，或者资源被移到了其他地方。

状态码是在每条响应报文的起始行中返回的。会返回一个数字状态和一个可读的状态文本。数字码便于程序进行差错处理，而原因短语则更便于人们理解。

可以通过三位数字代码对不同状态码进行分类。200到299之间的状态码表示成功，300到399之间的代码表示资源已经到移走了，400到499之间的代码表示客户端的请求出错了，500到599之间的代码表示服务器出错了。

下图列出了状态码的分类：

![](/images/categories/web/http_message_status_code.png)

当前的HTTP版本只为每类状态定义了几个代码。随着协议的发展，HTTP规范中会正式地定义更多的状态码。如果收到了不认识的状态码，可能时有人将其作为当前协议的扩展定义的。可以根据其所处范围，将它作为那个类别中一个普通的成员来处理。

比如，如果收到了状态码515，就应该认为这条响应指出了服务器的错误，这是5XX报文的通用类别。

#### 原因短语

原因短语是响应起始行中的最后一个组件。它为状态码提供了文本形式的解释，比如，在行HTTP/1.0 200 OK中，OK就是原因短语。

原因短语和状态码是成对出现的。原因短语是状态码的可读版本，应用程序开发者将其传送给用户，用以说明在请求期间发生了什么情况。

HTTP规范并没有提供任何硬性规定，要求原因短语以何种形式出现。

#### 版本号

版本号会以HTTP/x.y的形式出现在请求和响应报文的起始行中，为HTTP应用程序提供了一种将自己所遵循的协议版本告知对方的形式。

使用版本号的目的是使用HTTP的应用程序提供一种线索，以便互相了解对方的能力和报文格式。在与使用HTTP1.1的应用程序进行通信的HTTP 1.2应用程序应该知道，它不能使用任何新的1.2特性，因为使用老版本协议的应用程序很可能无法实现这些特性。
