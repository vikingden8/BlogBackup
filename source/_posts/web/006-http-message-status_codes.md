---
title: HTTP报文中的状态码
date: 2017-01-16 20:50:32
tags:
categories: "Web学习笔记"
---

HTTP状态码被分成了五大类，状态码为客户端提供了一种理解事务处理结果的便捷方式。

#### 100~199--信息性状态码

HTTP/1.1向协议中引入了信息性状态码。这些状态码相对较新，由于对其复杂性和感知价值存在一些争论，而受到限制。下图是已定义的信息性状态码。

![](/images/categories/web/http_status_code_1.png)

100 Continue状态码尤其让人糊涂。它的目的是对这样的情况进行优化：HTTP客户端应用程序有一个实体的主体部分要发送给服务器，但希望在发送之前查看一下服务器是否会接受这个实体。这可能会给HTTP程序员带来一些困扰，因此在这里进行了比较详细的讨论。

<!--more-->

**客户端与100 Continue**

如果客户端在向服务器发送一个实体，并且愿意在发送实体之前等待100 Continue响应。那么，客户端就要发送一个携带了值为100 Continue的Expect请求首部。如果客户端没有发送实体，就不应该发送100 Continue Expect首部，因为这样会使服务器误以为客户端要发送一个实体。

从很多方面来看，100 Continue都是一种优化。客户端应用程序只有在避免向服务器发送一个服务器无法处理或使用的大实体时，才应该使用100 Continue。

由于起初对100 Continue状态存在一些困惑，因此发送了值为100 Continue的Expect首部的客户端不应该永远在那里等待服务器发送100 Continue的响应。超时一定时间之后，客户端应该直接将实体发送出去。实际上，客户端程序的实现者也应该做好应对非预期100 Continue响应的准备。有些出错的HTTP应用程序会不合时宜地发送这些代码。

**服务器与100 Continue**

如果服务器收到了一条带有值为100 Continue的Expect首部的请求，它会用100 Continue响应或一条错误码来进行响应。服务器永远也不应该向没有100 Continue期望的客户端发送100 Continue状态码。但如前所述，有些出错的服务器可能会这么做。

如果出于某种原因，服务器在有机会发送100 Continue响应之前就收到了部分的实体，就说明客户端已经决定继续发送数据了，这样，服务器就不需要发送这个状态码了。但服务器读完请求之后，还是应该为请求发送一个最终状态码（它可以跳过100 Continue状态）。

最后，如果服务器收到了带有100 Continue期望的请求而且它决定在读取实体的主体部分之前结束请求，就不应该仅仅时发送一条响应并关闭连接，因为这样会妨碍客户端接收响应。

**代理与100 Continue**

如果代理从客户端收到了一条带有100 Continue期望的请求，它需要做几件事情。如果代理知道下一跳服务器时HTTP/1.1兼容的，或者并不知道下一跳服务器与哪个版本兼容，它都应用将Expect首部放在请求中向下转发。

#### 200~299--成功状态码

客户端发起请求时，这些请求通常都是成功的。服务器有一组用来表示成功的状态码，分别对应于不同类型的请求。

![](/images/categories/web/http_status_code_20.png)

![](/images/categories/web/http_status_code_21.png)

#### 300~399--重定向状态码

重定向状态码要么告知客户端使用替代位置来访问他们所感兴趣的资源，要么就提供一个替代的响应而不是资源的内容。如果资源已经移动，可发送一个重定向状态码和一个可选的Location首部来告知客户端资源已经被移走，以及现在可以在哪里找到它。这样，浏览器就可以在不打扰使用者的情况下，透明地转入新的位置了。

![](/images/categories/web/http_status_code_30.png)

可以通过某些重定向状态码对资源的应用程序本地副本与源端服务器上的资源进行验证。比如，HTTP应用程序可以查看其资源的本地副本是否仍然是最新的，或者在源端服务器是否被修改过。如下图，客户端发送了一个特殊的If-Modified-Since首部，说明只读取1997年10月之后修改过的文档。这个日期之后，此文档并未被修改过，因此，服务器回送了一个304状态码，而不是文档的内容。

![](/images/categories/web/http_status_code_31.png)

下面是已定义的重定向状态码：

![](/images/categories/web/http_status_code_32.png)

![](/images/categories/web/http_status_code_33.png)

#### 400~499--客户端错误状态码

下面是已定义的客户端错误状态码：

![](/images/categories/web/http_status_code_40.png)

![](/images/categories/web/http_status_code_41.png)

![](/images/categories/web/http_status_code_42.png)

#### 500~599--服务器错误状态码

有时客户端发送了一条有效请求，服务器自身却出错了。这可能是客户端碰上了服务器的缺陷，或者服务器上的子元素，比如某个网关资源，出了错。

下图是已定义的服务器错误状态码：

![](/images/categories/web/http_status_code_50.png)

![](/images/categories/web/http_status_code_51.png)
